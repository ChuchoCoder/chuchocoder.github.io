import{r as i,j as e,B as t,P as o,T as r,a as s,b as a,c as n,d as c,e as l,f as d,g as x,I as h,h as m,C as p}from"./index-DvxRpPvY.js";const g=i=>Number.isFinite(i)?new Intl.NumberFormat("es-AR",{useGrouping:!0,maximumFractionDigits:0}).format(i):"",u=i=>Number.isFinite(i)?new Intl.NumberFormat("es-AR",{useGrouping:!0,minimumFractionDigits:2,maximumFractionDigits:4}).format(i):"",f=i=>Number.isFinite(i)?new Intl.NumberFormat("es-AR",{minimumFractionDigits:2,maximumFractionDigits:2}).format(i):"";const j=({title:j,operations:b,_sideLabel:y,isSell:v})=>{const S=i.useMemo(()=>{const i=function(i){if(!i||0===i.length)return[];const e=new Map;return i.forEach(i=>{const t=i.order_id||i.id;if(e.has(t)){const o=e.get(t);o.cantidad+=i.cantidad,o.total+=i.total||i.cantidad*i.precio,o.comisiones+=i.comisiones||0,o.partialFills+=1}else e.set(t,{...i,order_id:t,cantidad:i.cantidad,total:i.total||i.cantidad*i.precio,comisiones:i.comisiones||0,partialFills:1})}),Array.from(e.values())}(b);return i.sort((i,e)=>v?i.precio!==e.precio?e.precio-i.precio:Math.abs(e.cantidad)-Math.abs(i.cantidad):i.precio!==e.precio?i.precio-e.precio:e.cantidad-i.cantidad)},[b,v]),F=i.useMemo(()=>function(i){const e=i.reduce((i,e)=>(i.cantidad+=e.cantidad||0,i.total+=e.total||0,i.comisiones+=e.comisiones||0,i.cantidadPrecio+=(e.cantidad||0)*(e.precio||0),i),{cantidad:0,total:0,comisiones:0,cantidadPrecio:0});return e.precioPromedio=e.cantidad>0?e.cantidadPrecio/e.cantidad:0,e}(S),[S]),C=S.length>0,W=v?"error.main":"success.main",A=v?"error.light":"success.light";return e.jsx(o,{elevation:0,sx:{flex:1,display:"flex",flexDirection:"column",minHeight:0,overflow:"visible",borderRadius:0},children:e.jsx(r,{sx:{flex:1,overflowX:"auto",overflowY:"visible"},children:e.jsxs(s,{size:"small",stickyHeader:!0,children:[e.jsxs(a,{children:[e.jsx(n,{children:e.jsx(c,{colSpan:4,sx:{position:"sticky",top:0,backgroundColor:A,zIndex:2,borderBottom:2,borderColor:"divider",py:1},children:e.jsx(l,{variant:"subtitle2",sx:{fontWeight:700,color:W,textAlign:"center",fontSize:"0.9rem",letterSpacing:"0.5px"},children:j})})}),e.jsxs(n,{children:[e.jsxs(c,{sx:{fontWeight:600},children:["Cantidad",C&&e.jsx(l,{variant:"caption",display:"block",sx:{fontWeight:700,color:"text.primary"},children:g(F.cantidad)})]}),e.jsxs(c,{align:"right",sx:{fontWeight:600},children:["Precio",C&&e.jsx(l,{variant:"caption",display:"block",sx:{fontWeight:700,color:"text.primary"},children:u(F.precioPromedio)})]}),e.jsxs(c,{align:"right",sx:{fontWeight:600},children:["Total",C&&e.jsx(l,{variant:"caption",display:"block",sx:{fontWeight:700,color:"text.primary"},children:f(F.total)})]}),e.jsxs(c,{align:"right",sx:{fontWeight:600},children:["Comisiones",C&&e.jsx(l,{variant:"caption",display:"block",sx:{fontWeight:700,color:"text.primary"},children:f(F.comisiones)})]})]})]}),e.jsxs(d,{children:[!C&&e.jsx(n,{children:e.jsx(c,{colSpan:4,align:"center",children:e.jsx(l,{variant:"body2",color:"text.secondary",children:"Sin operaciones"})})}),S.map((i,o)=>{const r="VENTA"===i.lado||"V"===i.lado,s=r?-Math.abs(i.cantidad):i.cantidad;return e.jsxs(n,{sx:o%2==1?{backgroundColor:"action.hover"}:void 0,children:[e.jsx(c,{children:e.jsxs(t,{sx:{display:"flex",alignItems:"center",gap:.5},children:[e.jsx(l,{variant:"body2",sx:{color:r?"error.main":"inherit",fontWeight:r?500:400},children:g(s)}),i.order_id&&e.jsx(x,{title:`ID: ${i.order_id}`,placement:"top",children:e.jsx(h,{size:"small",sx:{p:.25},children:e.jsx(m,{sx:{fontSize:14,color:"info.main"}})})}),i.partialFills>1&&e.jsx(p,{label:`Ã—${i.partialFills}`,size:"small",sx:{height:16,fontSize:"0.65rem"}})]})}),e.jsx(c,{align:"right",children:u(i.precio)}),e.jsx(c,{align:"right",children:f(i.total)}),e.jsx(c,{align:"right",sx:{color:"text.secondary",fontWeight:500},children:f(i.comisiones)})]},i.order_id||o)})]})]})})})},b=({operations:o,_patron:r})=>{const{ciOperations:s,h24Operations:a,ciSide:n,h24Side:c}=i.useMemo(()=>{if(!o||0===o.length)return{ciOperations:[],h24Operations:[],ciSide:"",h24Side:""};const i=[],e=[];let t="",r="";return o.forEach(o=>{const s=o.venue||"";s.includes("CI")?(i.push(o),t||(t=o.lado)):s.includes("24")&&(e.push(o),r||(r=o.lado))}),{ciOperations:i,h24Operations:e,ciSide:t,h24Side:r}},[o]),l="VENTA"===n||"V"===n?"Venta CI":"Compra CI",d="COMPRA"===c||"C"===c?"Compra 24hs":"Venta 24hs",x="VENTA"===n||"V"===n,h="VENTA"===c||"V"===c;return e.jsxs(t,{sx:{display:"flex",flexDirection:{xs:"column",md:"row"},gap:0,minHeight:200,"& > :first-of-type":{borderRight:{md:1,xs:0},borderBottom:{xs:1,md:0},borderColor:"divider"}},children:[e.jsx(j,{title:l,operations:s,sideLabel:n,isSell:x}),e.jsx(j,{title:d,operations:a,sideLabel:c,isSell:h})]})};export{b as default};
//# sourceMappingURL=ArbitrageOperationsDetail-CoQGZwYY.js.map
